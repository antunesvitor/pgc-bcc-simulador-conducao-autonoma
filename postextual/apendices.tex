% ---
% Inicia os apêndices
% ---
\begin{apendicesenv}

% Imprime uma página indicando o início dos apêndices
\partapendices

% ----------------------------------------------------------
\chapter{Sobre os testes feitos e como reproduzi-los}
% ----------------------------------------------------------

Os testes dos quais a seção de resultados se refere estão disponíveis em vídeo nesta \href{https://drive.google.com/drive/folders/1WcdHMeFQLfDubvYvLJnqbobnysT5pJoq?usp=sharing}{URL do Google Drive}.

É possível baixar e reproduzir os testes feitos neste projeto, o desempenho pode não ser exatamente igual aos dos vídeos acima, porém é esperado um resultado semelhante.

Como reproduzir os testes está descrito na página inicial do \href{https://github.com/antunesvitor/SimuladorDeConducao}{repositório}, porém a fim de deixar este artigo completo com toda a informação necessária as instruções serão disponíveis aqui também.

\section*{Requisitos}

\begin{itemize}
    \item Sistema Operacional: Windows 11¹  ou Linux²
    \item Unity Hub
    \item Unity3D editor versão 2022.3.13f1³
    \item Git (opcional)
\end{itemize}

¹ A Unity3D está disponível para Windows 10 também, mas este projeto não foi testado nele, provavelmente é possível reproduzir/treinar sem problema algum no Win10.

² As versões de Linux suportadas oficialmente é O Ubuntu 16.04, 18.04 e CentOS 7.  O desenvolvimento do projeto foi feito no Arch Linux que NÃO é oficialmente suportado.

³ Pode ser possível executar em outras versões 2022.3.x.

\section*{Como reproduzir} 
Aqui é explicado como reproduzir os testes que foram feitos no projeto. Eles obterão o exato resultado mostrado no projeto dado a natureza estocástica do agente e grande quantidade de possíveis estados, porém um desempenho muito próximo é esperado.

\subsection*{Instalando e abrindo o projeto}

 \begin{enumerate}
    \item Primeiro baixe e instale o Unity Hub.
    \begin{itemize}
        \item Windows: baixe e instale pelo \href{https://unity.com/download}{site oficial da Unity}.
        \item Arch Linux: instale \href{https://aur.archlinux.org/packages/unityhub}{o pacote na AUR}. Para isso terá que usar um gerenciador de pacotes da AUR como o \href{https://github.com/Jguer/yay}{yay} ou \href{https://github.com/morganamilo/paru}{o paru}.
        \item Para as distribuições Linux oficialmente suportadas siga as \href{https://docs.unity3d.com/2020.1/Documentation/Manual/GettingStartedInstallingHub.html}{instruções na documentação}.
    \end{itemize}
    \item Após isso clone ou baixe \href{https://github.com/antunesvitor/SimuladorDeConducao}{o repositório do projeto}.
    \item Abra o Unity Hub, vá em Open e navegue até o diretório onde você baixou o projeto e clique abrir. É possível que apareça um aviso de que a versão do editor não está instalada no seu computador, para isso existe duas opções:
    \begin{itemize}
        \item (Recomendado) Baixar a versão exata do projeto: Vá na \href{https://unity.com/releases/editor/archive}{página de arquivo da editores da Unity} clique na aba "Unity 2022.X" e clique no botão  "Unity Hub" na versão 2022.3.7;
        \item (Não recomendado) Alterar a versão do projeto: quando o aviso aparecer clique em "Choose another editor version" e então em "Install Editor Version" ele te apresentará as versões LTS disponíveis para download;
    \end{itemize}
    \item Após isso basta clicar duas vezes para abrir o projeto.
 \end{enumerate}

\subsection*{Testando os modelos}
Para testar os modelos apropriadamente é preciso testar um por vez e ajustar o projeto de acordo, alguns dos "cérebros" (arquivos .onnx na pasta Brains são a política definida pelo treino, a rede neural) são de trajetos específicos.

\begin{enumerate}
    \item Selecione o objeto Car na hierarquia do projeto.
    \item Arraste o "cérebro" que deseja treinar para o campo \textit{Model} no inspetor à esquerda do editor.
    \item Desabilite todos os paths que não for usar (consultar \nameref{nomenclatura}).
    \item Agora basta apertar o botão \textit{play} no topo ao centro e o veículo já estará sendo conduzido pelo cérebro. (Obs. garanta que os campos \textit{Behaviour Type} e \textit{Inference Device} estejam ambos em \textit{Default}  ou  \textit{Inference Only} e \textit{CPU} respectivamente, caso contrário não funcionará).
\end{enumerate}

\subsection*{Nomenclatura dos cérebros}\label{nomenclatura}
Os "cérebros" estão na pasta Assets/Brains e seguem o seguinte padrão de nome:

CarSim<algoritmo><versão>\_<path>-<id>

<algoritmo> serve pra identificar o algoritmo que foi treinado possíveis valores são: PPO, SAC, PPO+BC, PPO+GAIL, PPO+GAIL+BC, etc. 

<versão> é um número que identifica a versão do veículo, durante o projeto diversas versões foram criadas, atualmente só há uma versão dele (3.1), porém esta a versão foi posta para deixar claro que possa haver mais de um agente em versões diferentes no mesmo ambiente.

<path> a rota a qual aquele cérebro treinou, se habilitar uma rota diferente do cérebro ele provavelmente não irá desempenhar bem a tarefa. O nome é igual aos GameObjects do localizados abaixo do GameObject SpawnPointManager. O "GERAL" significa que ele treinou em todas as rotas.

<id> opcional, um identificador a mais para diferenciar um cérebro de outro caso os valores acima sejam iguais.


% ----------------------------------------------------------
% \chapter{Segundo apêndice com título tão grande quanto se queira porque ele já faz a quebra de linha da coisa toda}
% % ----------------------------------------------------------
% \lipsum[51-53] % Texto qualquer. REMOVER!!

\end{apendicesenv}
% ---